app.controller("T19020Controller", ["$scope", "Service", "Data", "$window", "$filter",
    function ($scope, Service, Data, $window, $filter) { //$location,
        $scope.obj = {};
        $scope.obj = Data;
        $scope.obj.T19020 = {};        
        loadGridData();
        loadItemData();
        function loadGridData() {
            loader(true)
            var load = Service.loadDataWithoutParm('/T19020/LoadData');
            load.then(function (returnData) {
                $scope.obj.griDataList = JSON.parse(returnData);
                //if ($scope.obj.griDataList.length > 0) {
                //    var firstRow = $scope.obj.griDataList[0];
                //    $scope.dynamicColumns = [];

                //    for (var key in firstRow) {
                //        if (key !== 'T_EMP_CODE' && key !== 'T_EMP_NAME') {
                //            $scope.dynamicColumns.push(key);
                //        }
                //    }
                //}
                loader(false)
            });
        }
        function loadItemData() {
            loader(true)
            var load = Service.loadDataWithoutParm('/T19020/GetMonthList');
            load.then(function (returnData) {
                $scope.obj.MonthList = JSON.parse(returnData);
                loader(false)
            });
        }
        $scope.onMonthChange = function () {
            debugger;
            $scope.obj.T19020.T_SALARY_MONTH = $scope.obj.ddlItem.T_MONTH_CODE;
        };
        $scope.Save_Click = function () {
            if (isEmpty('ddlItem', 'lblMonth')) { return; }
            loader(true)
            var save = Service.saveData_Model_List('/T19020/SaveData', $scope.obj.T19020, $scope.obj.griDataList);
            save.then(function (returnData) {
                smsAlert(returnData);
                loadGridData();
                clear();
                loader(false)
            });
        }       
        $scope.Clear_Click = function () {
            clear();
        }
        $scope.Print_Click = function () {
            alert('Print');
        }
        function clear() {
            $scope.obj.T19020 = {};
        }
    }
]);